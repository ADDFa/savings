import{j as e,r as c,F as x,a as r,g as f,s as v,p as y}from"./index-36bc0cf6.js";import{I as N}from"./Icon-06127706.js";const b=s=>{const{isIn:a,modalTarget:t}=s;return e.jsx("div",{className:"col-md",children:e.jsxs("button",{className:`btn btn-${a?"success":"danger"} w-100`,"data-bs-toggle":"modal","data-bs-target":`#${t}`,children:[e.jsx(N,{name:"plus"}),a?"Pemasukan":"Pengeluaran"]})})},g=s=>{const a=c.useRef(null),{id:t,title:n,children:d}=s;return e.jsx("div",{className:"modal fade",id:t,"data-bs-backdrop":"static","data-bs-keyboard":"false",tabIndex:-1,"aria-labelledby":"label","aria-hidden":"true",children:e.jsx("div",{className:"modal-dialog modal-dialog-centered",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h1",{className:"modal-title fs-5",id:"label",children:n}),e.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",ref:a})]}),e.jsx("div",{className:"modal-body py-5 text-start",children:d})]})})})},j=s=>{const a=document.getElementById(s);return()=>{const n=a==null?void 0:a.querySelector(".btn-close");n&&n.click()}},B=()=>{const[s,a]=c.useState(),t=j("add-income"),n=j("add-expense"),d=c.useRef(null);c.useEffect(()=>{(async()=>{const o=await f("saving");o&&a(o)})()},[]);const i=async(l,o)=>{var u;const p=v(l),m=await y(o==="in"?"income":"expense",{body:p});if(m)switch(a(m),(u=d.current)==null||u.classList.remove("d-none"),setTimeout(()=>{var h;(h=d.current)==null||h.classList.add("d-none")},2e3),o){case"in":return t();case"out":return n()}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"rounded-3 bg-grape text-light px-4 py-2",children:[e.jsx("p",{children:"Jumlah Tabungan"}),s?e.jsxs("h2",{children:["Rp. ",s.total]}):e.jsx("span",{className:"fs-4",children:"loading..."})]}),e.jsx("div",{className:"alert alert-success my-4 d-none",ref:d,children:"Berhasil menambahkan"}),e.jsx(g,{id:"add-income",title:"Tambah Pemasukan",children:e.jsx(x,{handleSubmit:l=>i(l,"in"),textButton:"Tambah Pemasukan",children:e.jsx(r,{id:"total",name:"total",type:"number",children:"Jumlah"})})}),e.jsx(g,{id:"add-expense",title:"Tambah Pengeluaran",children:e.jsxs(x,{handleSubmit:l=>i(l,"out"),textButton:"Tambah Pengeluaran",children:[e.jsx(r,{id:"total",name:"total",type:"number",children:"Jumlah"}),e.jsx(r,{id:"info",name:"info",type:"text",children:"Keterangan"})]})}),e.jsxs("div",{className:"mt-3 d-flex gap-2 justify-content-end",children:[e.jsx(b,{isIn:!0,modalTarget:"add-income"}),e.jsx(b,{modalTarget:"add-expense"})]})]})};export{B as default};
